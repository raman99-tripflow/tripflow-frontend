<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>TripFlow</title>

<style>
:root {
  --primary: #4f46e5;
  --primary-dark: #3730a3;
  --bg: #f9fafb;
  --card: #ffffff;
  --text: #111827;
  --muted: #6b7280;
  --border: #e5e7eb;
}

body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
  background: var(--bg);
  color: var(--text);
}

/* TOP BAR */
.topbar {
  background: linear-gradient(135deg, var(--primary), var(--primary-dark));
  color: white;
  padding: 18px 28px;
  font-weight: 600;
  font-size: 1rem;
}

/* HERO SECTION */
.hero {
  text-align: center;
  padding: 5rem 1.5rem 3rem 1.5rem;
  max-width: 700px;
  margin: auto;
}

.hero h1 {
  font-size: 2.4rem;
  margin-bottom: 1.2rem;
  font-weight: 700;
}

.hero p {
  font-size: 1.05rem;
  color: var(--muted);
  line-height: 1.6;
}

/* CONTAINER */
.container {
  max-width: 700px;
  margin: auto;
  padding: 2rem 1.5rem 4rem 1.5rem;
}

/* CARD */
.card {
  background: var(--card);
  padding: 2rem;
  border-radius: 18px;
  box-shadow: 0 15px 35px rgba(0,0,0,0.05);
  margin-bottom: 2rem;
}

/* FORM */
input, select {
  width: 100%;
  padding: 14px;
  margin-bottom: 14px;
  border-radius: 12px;
  border: 1px solid var(--border);
  font-size: 0.95rem;
}

input:focus, select:focus {
  outline: none;
  border-color: var(--primary);
}

button {
  width: 100%;
  padding: 14px;
  border-radius: 12px;
  border: none;
  background: var(--primary);
  color: white;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: 0.2s ease;
}

button:hover {
  background: var(--primary-dark);
}

/* RESULT */
.loading {
  text-align: center;
  font-style: italic;
  color: var(--muted);
}

.day-card {
  margin-bottom: 2.5rem;
}

.day-title {
  font-weight: 700;
  font-size: 1.1rem;
  margin-bottom: 1rem;
  padding-bottom: 0.6rem;
  border-bottom: 2px solid var(--border);
}

.section-title {
  font-size: 0.85rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--primary);
  margin-top: 1.4rem;
  margin-bottom: 0.6rem;
}

.activity {
  padding: 0.9rem;
  background: #eef2ff;
  border-radius: 10px;
  font-size: 0.9rem;
  margin-bottom: 0.6rem;
}

.footer {
  text-align: center;
  font-size: 0.75rem;
  color: var(--muted);
  margin-top: 3rem;
}
</style>
</head>

<body>

<div class="topbar">
  üìç TripFlow
</div>

<section class="hero">
  <h1>TripFlow üìç</h1>
  <p>
    Reizen plannen kost tijd, energie en eindeloos scrollen.
    TripFlow lost dit op door automatisch een slimme,
    realistische dagplanning te maken op basis van jouw tempo,
    budget en interesses ‚Äî zonder overweldiging.
  </p>
</section>

<div class="container">

<div class="card">
<form id="tripForm">
  <input id="stad" placeholder="Stad" required />
  <input id="dagen" type="number" placeholder="Aantal dagen" required />
  <input id="personen" type="number" placeholder="Aantal personen" required />
  <input id="interesses" placeholder="Interesses (bv. cultuur, eten)" />

  <select id="tempo">
    <option value="rustig">Rustig tempo</option>
    <option value="gemiddeld" selected>Gemiddeld tempo</option>
    <option value="actief">Actief tempo</option>
  </select>

  <select id="budget">
    <option value="laag">Laag budget</option>
    <option value="gemiddeld" selected>Gemiddeld budget</option>
    <option value="hoog">Hoog budget</option>
  </select>

  <button type="submit">Genereer mijn planning</button>
</form>
</div>

<div id="result"></div>

<div class="footer">
  AI-powered travel planning
</div>

</div>

<script>

function capitalizeInput(id) {
  const input = document.getElementById(id);
  input.addEventListener("input", function() {
    if (this.value.length > 0) {
      this.value = this.value.charAt(0).toUpperCase() + this.value.slice(1);
    }
  });
}

capitalizeInput("stad");
capitalizeInput("interesses");

document.getElementById("tripForm").addEventListener("submit", async function(e) {
  e.preventDefault();

  const result = document.getElementById("result");
  result.innerHTML = `<div class="card loading">Planning wordt gegenereerd...</div>`;

  const data = {
    stad: document.getElementById("stad").value.trim(),
    dagen: parseInt(document.getElementById("dagen").value),
    personen: parseInt(document.getElementById("personen").value),
    interesses: document.getElementById("interesses").value.trim(),
    tempo: document.getElementById("tempo").value,
    budget: document.getElementById("budget").value
  };

  try {
    const response = await fetch("https://tripflow-backend-lmtd.onrender.com/generate-plan", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data)
    });

    const resultData = await response.json();

    if (!response.ok) {
      result.innerHTML = `<div class="card">Fout: ${resultData.error}</div>`;
      return;
    }

    displayPlanning(resultData.planning);

  } catch (err) {
    result.innerHTML = `<div class="card">Netwerkfout: ${err.message}</div>`;
  }
});

function displayPlanning(text) {
  const result = document.getElementById("result");

  if (!text) {
    result.innerHTML = `<div class="card">Geen planning ontvangen.</div>`;
    return;
  }

  const dayBlocks = text.split(/(?=Dag\s\d+)/g);
  let html = "";

  dayBlocks.forEach(block => {
    const lines = block.split("\n").filter(l => l.trim() !== "");
    const dayTitle = lines[0];

    html += `<div class="card day-card">
              <div class="day-title">${dayTitle}</div>`;

    lines.slice(1).forEach(line => {

      if (line.includes("Ochtend") || line.includes("Middag") || line.includes("Avond") || line.includes("Rustmoment") || line.includes("Slecht")) {
        html += `<div class="section-title">${line}</div>`;
      } else {
        html += `<div class="activity">${line}</div>`;
      }

    });

    html += `</div>`;
  });

  result.innerHTML = html;
}

</script>

</body>
</html>
