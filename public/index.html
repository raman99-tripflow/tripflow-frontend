<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <title>TripFlow AI</title>
</head>
<body>

<h1>Plan je citytrip met AI</h1>

<form id="tripForm">
  <input id="stad" placeholder="Stad" required /><br><br>

  <input id="dagen" type="number" placeholder="Aantal dagen" required /><br><br>

  <input id="personen" type="number" placeholder="Aantal personen" value="2" required /><br><br>

  <input id="interesses" placeholder="Interesses (bv. cultuur, eten)" /><br><br>

  <select id="tempo">
    <option value="rustig">Rustig</option>
    <option value="gemiddeld" selected>Gemiddeld</option>
    <option value="actief">Actief</option>
  </select><br><br>

  <select id="budget">
    <option value="laag">Laag budget</option>
    <option value="gemiddeld" selected>Gemiddeld budget</option>
    <option value="hoog">Hoog budget</option>
  </select><br><br>

  <select id="vervoer">
    <option value="lopen">Voornamelijk lopen</option>
    <option value="ov" selected>Openbaar vervoer</option>
    <option value="taxi">Taxi / Uber</option>
  </select><br><br>

  <button type="submit">Maak mijn planning</button>
</form>

<h2>Planning</h2>
<pre id="output"></pre>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const form = document.getElementById("tripForm");
  const output = document.getElementById("output");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const data = {
      stad: document.getElementById("stad").value,
      dagen: parseInt(document.getElementById("dagen").value),
      personen: parseInt(document.getElementById("personen").value),
      interesses: document.getElementById("interesses").value,
      tempo: document.getElementById("tempo").value,
      budget: document.getElementById("budget").value,
      vervoer: document.getElementById("vervoer").value
    };

    output.textContent = "AI is je reis aan het plannen...";

    try {
      const response = await fetch(
        "https://tripflow-backend-lmtd.onrender.com/generate-plan",
        {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        }
      );

      const result = await response.json();

      if (!response.ok) {
        output.textContent = "Fout: " + (result.error || "Onbekende fout");
        return;
      }

      output.textContent = result.planning;
    } catch (err) {
      output.textContent = "Netwerkfout: " + err.message;
    }
  });
});
</script>

</body>
</html>
